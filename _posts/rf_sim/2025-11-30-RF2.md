---
title: "251201 Random Forest Simulation (2)"
show_date: true
comments: true
layout: single
categories:
  - RF
tags:
  - RF
toc: true
toc_sticky: true
published: true
mathjax: true
use_math: true
---

### Impact of noise and &sigma; (2d)

![2D Impact](/assets/rf_sim/251130_2d_impact_noise_and_sigma.png){: .align-center width="100%"}

---

##### 여쭤볼 사항

1. $$\sigma$$가 커짐에도 RRMSE의 값이 커지지 않는 이유: 샘플 수가 많아서 $$\sigma$$의 효과를 상쇄하기 때문?
2. Random Forest는 기본적으로 $$y_{i}$$의 평균을 내는 것으로 생각할 수 있으며, 어떤 입력 $$x$$에 대해 예측값 $$\hat{f}(x)$$는, 해당 리프 노드에 속한 $$k$$개 학습 데이터들의 $$y$$값 평균

   $$
   \hat{f}(x) = \frac{1}{k} \sum_{i=1}^{k} y_i
   $$

   - 이때 $$y_i = \tau(x_i) + \epsilon_i$$ 이고, $$\epsilon_i \sim N(0, \sigma^2)$$ 임.

3. 이때의 기댓값과 분산은 다음과 같이 쓸 수 있음.
    * **기댓값**

        $$
        E[\hat{f}(x)] = E\left[\frac{1}{k} \sum_{i=1}^{k} (\tau(x) + \epsilon_i)\right] = \tau(x) + \frac{1}{k}\sum_{i=1}^{k} E[\epsilon_i] = \tau(x)
        $$

    * **분산**

        $$
        Var(\hat{f}(x)) = Var\left(\frac{1}{k} \sum_{i=1}^{k} \epsilon_i\right) = \frac{1}{k^2} \sum_{i=1}^{k} Var(\epsilon_i) = \frac{1}{k^2} \cdot k \cdot \sigma^2 = \frac{\sigma^2}{k}
        $$

4. 이때 $$k=100$$이라고 하면, 아래와 같이 계산이 된다.

    * **$$\sigma = 0.1$$ 일 때:**
    노이즈에 의한 표준오차 $$\approx \frac{0.1}{\sqrt{100}} = 0.01$$
    
    * **$$\sigma = 10$$ 일 때:**
    노이즈에 의한 표준오차 $$\approx \frac{10}{\sqrt{100}} = 1$$

    * 현재 시뮬레이션에서 $$N=10000$$이기 때문에, 각 리프노드에 속한 $$k$$개의 데이터가 많아져서 $$\sigma$$를 키워도 작게보이는 것인지 의문